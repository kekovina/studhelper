(this["webpackJsonptsu-helper"]=this["webpackJsonptsu-helper"]||[]).push([[0],{102:function(e,t,a){e.exports=a.p+"static/media/persik.4e1ec840.png"},141:function(e,t,a){},214:function(e,t,a){e.exports=a(351)},326:function(e,t,a){},327:function(e,t,a){},333:function(e,t){},335:function(e,t){},351:function(e,t,a){"use strict";a.r(t);a(215),a(241),a(243),a(244),a(246),a(247),a(248),a(249),a(250),a(251),a(252),a(253),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(262),a(263),a(264),a(266),a(267),a(268),a(269),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(277),a(278),a(279),a(280),a(281),a(282),a(283);var n=a(0),r=a.n(n),c=a(92),l=a.n(c),u=a(55),m=a.n(u),o=a(103),i=a.n(o),s=a(150),d=a(25),p=a(152),b=a.n(p),g=a(71),f=a.n(g),E=(a(292),a(51)),h=a.n(E),j=a(21),O=a.n(j),v=a(22),k=a.n(v),x=a(70),C=a.n(x),y=a(56),w=a.n(y),S=a(151),U=a.n(S),P=a(355),N=a(356),z=a(357),_=a(358),I=function(e){var t=e.id,a=e.go,n=e.fetchedUser,c=e.appUser;return r.a.createElement(O.a,{id:t},r.a.createElement(k.a,null,"\u041f\u0440\u0438\u0432\u0435\u0442!"),n&&r.a.createElement(C.a,null,r.a.createElement(w.a,{before:n.photo_200?r.a.createElement(U.a,{src:n.photo_200}):null,description:(1==n.sex?"\u0421\u0442\u0443\u0434\u0435\u043d\u0442\u043a\u0430":"\u0421\u0442\u0443\u0434\u0435\u043d\u0442")+" "+(c.status||"")},"".concat(n.first_name," ").concat(n.last_name))),r.a.createElement(C.a,null,r.a.createElement(w.a,{expandable:!0,before:r.a.createElement(P.a,{width:28}),onClick:a,"data-to":"schedule"},"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement(w.a,{expandable:!0,before:r.a.createElement(N.a,{width:28}),onClick:a,"data-to":"progress"},"\u0423\u0441\u043f\u0435\u0432\u0430\u0435\u043c\u043e\u0441\u0442\u044c"),r.a.createElement(w.a,{expandable:!0,before:r.a.createElement(z.a,{width:28}),onClick:function(){}},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")),r.a.createElement(C.a,null,r.a.createElement(w.a,{expandable:!0,before:r.a.createElement(_.a,{width:28}),onClick:a,"data-to":"settings"},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")))},J=a(7),T=a(35),A=a.n(T),K=a(36),V=a.n(K),W=a(37),B=a.n(W),D=a(102),G=a.n(D),M=(a(141),Object(J.m)()),q=function(e){return r.a.createElement(O.a,{id:e.id},r.a.createElement(k.a,{left:r.a.createElement(A.a,{onClick:e.go,"data-to":"home"},M===J.i?r.a.createElement(V.a,null):r.a.createElement(B.a,null))},"Persik"),r.a.createElement("img",{className:"Persik",src:G.a,alt:"Persik The Cat"}))},F=Object(J.m)(),H=function(e){return r.a.createElement(O.a,{id:e.id},r.a.createElement(k.a,{left:r.a.createElement(A.a,{onClick:e.go,"data-to":"home"},F===J.i?r.a.createElement(V.a,null):r.a.createElement(B.a,null))},"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"))},L=Object(J.m)(),Q=function(e){return r.a.createElement(O.a,{id:e.id},r.a.createElement(k.a,{left:r.a.createElement(A.a,{onClick:e.go,"data-to":"home"},L===J.i?r.a.createElement(V.a,null):r.a.createElement(B.a,null))},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement(J.g,null))},R=a(10);a(326);function X(e){var t=e.data,a="customcard ",n="";switch(t.km){case-1:n="\u0410\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u044f 1";break;case 0:n="\u0437\u0430\u0447\u0451\u0442";break;case 1:n="\u0434\u0438\u0444\u0444. \u0437\u0430\u0447\u0451\u0442";break;case 2:n="\u044d\u043a\u0437\u0430\u043c\u0435\u043d";break;case 3:n="\u043a\u0443\u0440\u0441. \u0440\u0430\u0431";break;default:n="\u0441\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0443"}return t.t?0==t.km?t.t>=40?a+="fine":a+="fail":-1==t.km?t.m?(n="\u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e",/\u0437\u0430\u0447[\u0435\u0451]\u0442/gim.test(t.m)||/\u043e\u0442\u043b\u0438\u0447\u043d\u043e/gim.test(t.m)?a+="fine":/\u0445\u043e\u0440\u043e\u0448\u043e/gim.test(t.m)?a+="good":/\u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e/gim.test(t.m)?a+="bad":-1==t.km?a+="empty":a+="fail"):a+="empty":t.t>80?a+="fine":t.t>60?a+="good":t.t>40?a+="bad":a+="fail":0==t.km?/\u0437\u0430\u0447[\u0435\u0451]\u0442/gim.test(t.m)?a+="fine":a+="fail":1==t.km?/\u0437\u0430\u0447[\u0435\u0451]\u0442/gim.test(t.m)||/\u043e\u0442\u043b\u0438\u0447\u043d\u043e/gim.test(t.m)?a+="fine":/\u0445\u043e\u0440\u043e\u0448\u043e/gim.test(t.m)?a+="good":/\u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e/gim.test(t.m)?a+="bad":-1==t.km?a+="empty":a+="fail":/\u043e\u0442\u043b\u0438\u0447\u043d\u043e/gim.test(t.m)?a+="fine":/\u0445\u043e\u0440\u043e\u0448\u043e/gim.test(t.m)?a+="good":/\u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e/gim.test(t.m)?a+="bad":a+="fail",r.a.createElement("div",{class:a},r.a.createElement("div",{class:"card-type"},n),r.a.createElement("div",{class:"card-name"},t.name.length>60?t.name.slice(0,60)+"...":t.name),r.a.createElement("div",{class:t.t&&-1!=t.km?"card-total":"card-total-mark"},r.a.createElement("span",null,t.m&&-1==t.km?"\u0423\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e"==t.m?"\u0443\u0434\u0432.":"\u041d\u0435\u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e"==t.m?"\u043d\u0435\u0443\u0434\u0432\u043b.":"\u041d\u0435 \u044f\u0432\u0438\u043b\u0441\u044f"==t.m?"\u041d\u0435\u044f\u0432\u043a\u0430":t.m:t.t)))}a(327);a(51),a(328);var Y=Object(J.m)(),Z=function(e){var t=e.setPopout,a=e.go,c=e.id,l=e.appUser,u=e.progress,m=e.setProgress,o=Object(n.useState)(null),i=Object(d.a)(o,2),s=i[0],p=i[1],b=document.body.attributes.getNamedItem("scheme").value;return Object(n.useEffect)((function(){u||(t(r.a.createElement(J.l,{size:"large"})),h.a.get("https://tsu-helper-server.herokuapp.com/getProgress?num=".concat(l.num)).then((function(e){e.data.err||m(e.data.doc.data)})).then((function(){return t(null)})).catch((function(e){p(e),t(null)})))}),[]),r.a.createElement(O.a,{id:c},r.a.createElement(k.a,{left:r.a.createElement(A.a,{onClick:a,"data-to":"home"},Y===J.i?r.a.createElement(V.a,null):r.a.createElement(B.a,null))},"\u0417\u0430\u0447\u0451\u0442\u043a\u0430"),u&&u.map((function(e,t){return r.a.createElement("div",{className:"space_gray"==b?"card-block dark":"card-block"},r.a.createElement(J.c,{size:"s"},e.map((function(e){return r.a.createElement(J.b,{onClick:e.m||-1!=e.km?a:null,"data-to":"detailedprogress","data-km":JSON.stringify(Object(R.a)(Object(R.a)({},e),{},{term:t}))},r.a.createElement(X,{data:e}))}))),r.a.createElement("div",{class:"card-divider"},"\u0421\u0435\u043c\u0435\u0441\u0442\u0440 ",t+1))})),s&&r.a.createElement("div",null,"\u0412\u044b\u044f\u0432\u043b\u0435\u043d\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(JSON.stringify(s))))},$=a(69),ee=(Object(J.m)(),function(e){var t=e.id,a=e.createUser,n=r.a.useState({group:"",num:""}),c=Object(d.a)(n,2),l=c[0],u=c[1],m=r.a.useState({group:"",num:""}),o=Object(d.a)(m,2),i=o[0],s=o[1],p=r.a.useState(null),b=Object(d.a)(p,2),g=b[0],f=b[1],E=function(e){var t=e.currentTarget,a=t.name,n=t.value;n?("group"==[a]&&(/\b\d{6}\w?/.test(n)?/\b[1-9]\d{5}\b\w?/.test(n)?s((function(e){return Object(R.a)(Object(R.a)({},e),{},{group:{valid:"valid",text:"\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u043e!"}})})):s((function(e){return Object(R.a)(Object(R.a)({},e),{},{group:{valid:"error",text:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043d\u043e\u043c\u0435\u0440\u0430 \u0433\u0440\u0443\u043f\u043f\u044b"}})})):s((function(e){return Object(R.a)(Object(R.a)({},e),{},{group:{valid:"error",text:"\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0438\u0437 6 \u0446\u0438\u0444\u0440 \u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u043d\u0430 \u043a\u043e\u043d\u0446\u0435"}})}))),"num"==[a]&&(/\b\d{6}\b/.test(n)?/\b(1[3-9])|(2[01])\d{4}\b/.test(n)?s((function(e){return Object(R.a)(Object(R.a)({},e),{},{num:{valid:"valid",text:"\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u043e!"}})})):s((function(e){return Object(R.a)(Object(R.a)({},e),{},{num:{valid:"error",text:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0437\u0430\u0447\u0451\u0442\u043a\u0438"}})})):s((function(e){return Object(R.a)(Object(R.a)({},e),{},{num:{valid:"error",text:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u0447\u0451\u0442\u043a\u0438 \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0438\u0437 6 \u0446\u0438\u0444\u0440"}})})))):s((function(e){return Object(R.a)(Object(R.a)({},e),{},{group:{valid:"",text:""}})})),u((function(e){return Object(R.a)(Object(R.a)({},e),{},Object($.a)({},a,n))}))};return r.a.createElement(O.a,{id:t},r.a.createElement(k.a,null,"\u041f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u0410\u043d\u0442\u043e\u0448\u043a\u0438"),r.a.createElement(J.e,null,g&&r.a.createElement(J.f,{header:g.header,mode:"error"},g.text),r.a.createElement(J.k,{top:"\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b",name:"group",status:i.group.valid||null,bottom:i.group.text||null,onChange:E}),r.a.createElement(J.k,{top:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u0447\u0451\u0442\u043a\u0438",name:"num",status:i.num.valid||null,bottom:i.num.text||null,onChange:E}),r.a.createElement(J.a,{size:"l",onClick:function(){"valid"==i.group.valid&&"valid"==i.num.valid?a(f,l):("valid"!=i.group.valid&&s((function(e){return Object(R.a)(Object(R.a)({},e),{},{group:{valid:"error",text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b"}})})),"valid"!=i.num.valid&&s((function(e){return Object(R.a)(Object(R.a)({},e),{},{num:{valid:"error",text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043d\u043e\u043c\u0435\u0440 \u0437\u0430\u0447\u0451\u0442\u043a\u0438"}})})))}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),r.a.createElement(J.g,null))}),te=Object(J.m)(),ae=function(e){var t=e.id,a=e.go,n=e.data;return r.a.createElement(O.a,{id:t},r.a.createElement(k.a,{left:r.a.createElement(A.a,{onClick:a,"data-to":"progress"},te===J.i?r.a.createElement(V.a,null):r.a.createElement(B.a,null))},"\u041a\u0443\u0440\u0441 ",Math.floor(n.term/2)+1,". \u0421\u0435\u043c\u0435\u0441\u0442\u0440 ",n.term+1),r.a.createElement(J.g,null,r.a.createElement(J.h,{mode:"primary"},n.name),r.a.createElement(J.d,null,r.a.createElement(J.j,{header:"\u0422\u0438\u043f"},function(e){switch(e){case-1:return"\u041d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e";case 0:return"\u0417\u0430\u0447\u0451\u0442";case 1:return"\u0414\u0438\u0444\u0444\u0435\u0440\u0435\u043d\u0446\u0438\u0440\u043e\u0432\u0430\u043d\u043d\u044b\u0439 \u0437\u0430\u0447\u0451\u0442";case 2:return"\u042d\u043a\u0437\u0430\u043c\u0435\u043d";case 3:return"\u041a\u0443\u0440\u0441\u043e\u0432\u0430\u044f \u0440\u0430\u0431\u043e\u0442\u0430";default:return"\u041e\u0448\u0438\u0431\u043a\u0430. \u0421\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0443"}}(n.km))),r.a.createElement(J.d,null,r.a.createElement(J.j,{header:"\u041f\u0435\u0440\u0432\u0430\u044f \u0430\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u044f"},n.a||"\u041d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438")),r.a.createElement(J.d,null,r.a.createElement(J.j,{header:"\u0418\u0442\u043e\u0433\u043e\u0432\u044b\u0439 \u0431\u0430\u043b\u043b"},n.t||"\u041d\u0435\u0442 \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u0438")),r.a.createElement(J.d,null,r.a.createElement(J.j,{header:"\u041e\u0442\u043c\u0435\u0442\u043a\u0430"},n.m))))},ne=function(){var e=Object(n.useState)("home"),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),u=Object(d.a)(l,2),o=u[0],p=u[1],g=Object(n.useState)({group:"N"}),E=Object(d.a)(g,2),j=E[0],O=E[1],v=Object(n.useState)(r.a.createElement(f.a,{size:"large"})),k=Object(d.a)(v,2),x=k[0],C=k[1],y=Object(n.useState)(null),w=Object(d.a)(y,2),S=w[0],U=w[1],P=Object(n.useState)(null),N=Object(d.a)(P,2),z=N[0],_=N[1];Object(n.useEffect)((function(){m.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}}));function e(){return(e=Object(s.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.send("VKWebAppGetUserInfo").then((function(e){return p(e),e.id}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().then((function(e){C(r.a.createElement(f.a,{size:"large"})),h.a.get("https://tsu-helper-server.herokuapp.com/getUser",{params:{id:e}}).then((function(e){e.data.err?c("start"):e.data.user?O({group:e.data.user.group,num:e.data.user.num,status:"\u0433\u0440\u0443\u043f\u043f\u044b ".concat(e.data.user.group)}):c("start"),C(null)}))}))}),[]);var J=function(e){c(e.currentTarget.dataset.to),e.currentTarget.dataset.km&&U(JSON.parse(e.currentTarget.dataset.km))};return r.a.createElement(b.a,{activePanel:a,popout:x},r.a.createElement(ee,{id:"start",createUser:function(e,t){C(r.a.createElement(f.a,{size:"large"})),h.a.get("https://tsu-helper-server.herokuapp.com/newUser",{params:{id:o.id,group:t.group,num:t.num}}).then((function(t){t.data.err?(e({header:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430",text:t.data.text}),C(null)):(O({group:t.data.user.group,num:t.data.user.num}),C(null),c("home"))}))}}),r.a.createElement(I,{id:"home",fetchedUser:o,go:J,appUser:j}),r.a.createElement(q,{id:"persik",go:J}),r.a.createElement(H,{id:"schedule",go:J}),r.a.createElement(Q,{id:"settings",go:J}),r.a.createElement(ae,{id:"detailedprogress",go:J,data:S}),r.a.createElement(Z,{id:"progress",go:J,setPopout:C,appUser:j,setDetailed:U,progress:z,setProgress:_}))};m.a.send("VKWebAppInit"),l.a.render(r.a.createElement(ne,null),document.getElementById("root"))}},[[214,1,2]]]);
//# sourceMappingURL=main.c7c273e7.chunk.js.map