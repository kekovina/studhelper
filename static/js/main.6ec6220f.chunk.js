(this["webpackJsonptsu-helper"]=this["webpackJsonptsu-helper"]||[]).push([[0],{145:function(e,t,a){e.exports=a.p+"static/media/persik.4e1ec840.png"},211:function(e,t,a){e.exports=a(354)},328:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){},336:function(e,t){},338:function(e,t){},354:function(e,t,a){"use strict";a.r(t);a(212),a(238),a(240),a(241),a(243),a(244),a(245),a(246),a(247),a(248),a(249),a(250),a(252),a(253),a(254),a(255),a(256),a(257),a(258),a(259),a(260),a(261),a(263),a(264),a(265),a(266),a(267),a(268),a(269),a(270),a(271),a(272),a(273),a(274),a(275),a(276),a(277),a(278),a(279),a(280);var n=a(0),r=a.n(n),c=a(91),l=a.n(c),u=a(55),o=a.n(u),i=a(97),m=a.n(i),s=a(143),d=a(29),p=a(146),b=a.n(p),f=a(70),g=a.n(f),E=(a(289),a(51)),h=a.n(E),j=a(26),v=a.n(j),O=a(27),k=a.n(O),x=a(69),C=a.n(x),w=a(56),y=a.n(w),U=a(144),S=a.n(U),P=a(358),z=a(359),N=a(360),_=a(361),I=function(e){var t=e.id,a=e.go,n=e.fetchedUser,c=e.appUser;return r.a.createElement(v.a,{id:t},r.a.createElement(k.a,null,"\u041f\u0440\u0438\u0432\u0435\u0442!"),n&&r.a.createElement(C.a,null,r.a.createElement(y.a,{before:n.photo_200?r.a.createElement(S.a,{src:n.photo_200}):null,description:"\u0421\u0442\u0443\u0434\u0435\u043d\u0442 \u0433\u0440\u0443\u043f\u043f\u044b ".concat(c.group)},"".concat(n.first_name," ").concat(n.last_name))),r.a.createElement(C.a,null,r.a.createElement(y.a,{expandable:!0,before:r.a.createElement(P.a,{width:28}),onClick:a,"data-to":"schedule"},"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"),r.a.createElement(y.a,{expandable:!0,before:r.a.createElement(z.a,{width:28}),onClick:a,"data-to":"progress"},"\u0423\u0441\u043f\u0435\u0432\u0430\u0435\u043c\u043e\u0441\u0442\u044c"),r.a.createElement(y.a,{expandable:!0,before:r.a.createElement(N.a,{width:28}),onClick:function(){}},"\u041d\u043e\u0432\u043e\u0441\u0442\u0438")),r.a.createElement(C.a,null,r.a.createElement(y.a,{expandable:!0,before:r.a.createElement(_.a,{width:28}),onClick:a,"data-to":"settings"},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438")))},A=a(10),J=a(42),K=a.n(J),T=a(43),V=a.n(T),W=a(44),B=a.n(W),G=a(145),q=a.n(G),D=(a(328),Object(A.j)()),F=function(e){return r.a.createElement(v.a,{id:e.id},r.a.createElement(k.a,{left:r.a.createElement(K.a,{onClick:e.go,"data-to":"home"},D===A.g?r.a.createElement(V.a,null):r.a.createElement(B.a,null))},"Persik"),r.a.createElement("img",{className:"Persik",src:q.a,alt:"Persik The Cat"}))},H=Object(A.j)(),L=function(e){return r.a.createElement(v.a,{id:e.id},r.a.createElement(k.a,{left:r.a.createElement(K.a,{onClick:e.go,"data-to":"home"},H===A.g?r.a.createElement(V.a,null):r.a.createElement(B.a,null))},"\u0420\u0430\u0441\u043f\u0438\u0441\u0430\u043d\u0438\u0435"))},M=Object(A.j)(),Q=function(e){return r.a.createElement(v.a,{id:e.id},r.a.createElement(k.a,{left:r.a.createElement(K.a,{onClick:e.go,"data-to":"home"},M===A.g?r.a.createElement(V.a,null):r.a.createElement(B.a,null))},"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"),r.a.createElement(A.f,null))};a(329);function R(e){var t=e.data,a="customcard ",n="";switch(t.km){case-1:n="\u0410\u0442\u0442\u0435\u0441\u0442\u0430\u0446\u0438\u044f 1";break;case 0:n="\u0437\u0430\u0447\u0451\u0442";break;case 1:n="\u0434\u0438\u0444\u0444. \u0437\u0430\u0447\u0451\u0442";break;case 2:n="\u044d\u043a\u0437\u0430\u043c\u0435\u043d";break;case 3:n="\u043a\u0443\u0440\u0441. \u0440\u0430\u0431";break;default:n="\u0441\u043e\u043e\u0431\u0449\u0438\u0442\u0435 \u0440\u0430\u0437\u0440\u0430\u0431\u043e\u0442\u0447\u0438\u043a\u0443"}return t.t?0==t.km?t.t>=40?a+="fine":a+="fail":-1==t.km?t.m?(n="\u043d\u0435 \u043e\u043f\u0440\u0435\u0434\u0435\u043b\u0435\u043d\u043e",/\u0437\u0430\u0447[\u0435\u0451]\u0442/gim.test(t.m)||/\u043e\u0442\u043b\u0438\u0447\u043d\u043e/gim.test(t.m)?a+="fine":/\u0445\u043e\u0440\u043e\u0448\u043e/gim.test(t.m)?a+="good":/\u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e/gim.test(t.m)?a+="bad":-1==t.km?a+="empty":a+="fail"):a+="empty":t.t>80?a+="fine":t.t>60?a+="good":t.t>40?a+="bad":a+="fail":0==t.km?/\u0437\u0430\u0447[\u0435\u0451]\u0442/gim.test(t.m)?a+="fine":a+="fail":1==t.km?/\u0437\u0430\u0447[\u0435\u0451]\u0442/gim.test(t.m)||/\u043e\u0442\u043b\u0438\u0447\u043d\u043e/gim.test(t.m)?a+="fine":/\u0445\u043e\u0440\u043e\u0448\u043e/gim.test(t.m)?a+="good":/\u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e/gim.test(t.m)?a+="bad":-1==t.km?a+="empty":a+="fail":/\u043e\u0442\u043b\u0438\u0447\u043d\u043e/gim.test(t.m)?a+="fine":/\u0445\u043e\u0440\u043e\u0448\u043e/gim.test(t.m)?a+="good":/\u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e/gim.test(t.m)?a+="bad":a+="fail",r.a.createElement("div",{class:a},r.a.createElement("div",{class:"card-type"},n),r.a.createElement("div",{class:"card-name"},t.name.length>60?t.name.slice(0,60)+"...":t.name),r.a.createElement("div",{class:t.t&&-1!=t.km?"card-total":"card-total-mark"},r.a.createElement("span",null,t.m&&-1==t.km?"\u0423\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e"==t.m?"\u0443\u0434\u0432.":"\u041d\u0435\u0443\u0434\u043e\u0432\u043b\u0435\u0442\u0432\u043e\u0440\u0438\u0442\u0435\u043b\u044c\u043d\u043e"==t.m?"\u043d\u0435\u0443\u0434\u0432\u043b.":"\u041d\u0435 \u044f\u0432\u0438\u043b\u0441\u044f"==t.m?"\u041d\u0435\u044f\u0432\u043a\u0430":t.m:t.t)))}a(330);var X=a(9);a(51),a(331);var Y=Object(A.j)(),Z=function(e){var t=e.setPopout,a=e.go,c=e.id,l=e.appUser,u=Object(n.useState)(null),o=Object(d.a)(u,2),i=o[0],m=o[1],s=Object(n.useState)(null),p=Object(d.a)(s,2),b=p[0],f=p[1],g=document.body.attributes.getNamedItem("scheme").value;return Object(n.useEffect)((function(){t(r.a.createElement(A.i,{size:"large"})),h.a.get("https://tsu-helper-server.herokuapp.com/getProgress?num=".concat(l.num)).then((function(e){e.data.err||m(e.data.doc.data)})).then((function(){return t(null)})).catch((function(e){f(e),t(null)}))}),[]),r.a.createElement(v.a,{id:c},r.a.createElement(k.a,{left:r.a.createElement(K.a,{onClick:a,"data-to":"home"},Y===A.g?r.a.createElement(V.a,null):r.a.createElement(B.a,null))},"\u0417\u0430\u0447\u0451\u0442\u043a\u0430"),i&&i.map((function(e,t){return r.a.createElement("div",{className:"space_gray"==g?"card-block dark":"card-block"},r.a.createElement(A.c,{size:"s"},e.map((function(e){return r.a.createElement(A.b,{onClick:a,"data-to":"persik"},r.a.createElement(R,{data:e}))}))),r.a.createElement("div",{class:"card-divider"},"\u0421\u0435\u043c\u0435\u0441\u0442\u0440 ",t+1))})),b&&r.a.createElement("div",null,"\u0412\u044b\u044f\u0432\u043b\u0435\u043d\u0430 \u043e\u0448\u0438\u0431\u043a\u0430: ".concat(JSON.stringify(b))))},$=a(68),ee=(Object(A.j)(),function(e){var t=e.id,a=e.createUser,n=r.a.useState({group:"",num:""}),c=Object(d.a)(n,2),l=c[0],u=c[1],o=r.a.useState({group:"",num:""}),i=Object(d.a)(o,2),m=i[0],s=i[1],p=r.a.useState(null),b=Object(d.a)(p,2),f=b[0],g=b[1],E=function(e){var t=e.currentTarget,a=t.name,n=t.value;n?("group"==[a]&&(/\b\d{6}\w?/.test(n)?/\b[1-9]\d{5}\b\w?/.test(n)?s((function(e){return Object(X.a)(Object(X.a)({},e),{},{group:{valid:"valid",text:"\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u043e!"}})})):s((function(e){return Object(X.a)(Object(X.a)({},e),{},{group:{valid:"error",text:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u043d\u043e\u043c\u0435\u0440\u0430 \u0433\u0440\u0443\u043f\u043f\u044b"}})})):s((function(e){return Object(X.a)(Object(X.a)({},e),{},{group:{valid:"error",text:"\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0438\u0437 6 \u0446\u0438\u0444\u0440 \u0438 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432 \u043d\u0430 \u043a\u043e\u043d\u0446\u0435"}})}))),"num"==[a]&&(/\b\d{6}\b/.test(n)?/\b(1[3-9])|(2[01])\d{4}\b/.test(n)?s((function(e){return Object(X.a)(Object(X.a)({},e),{},{num:{valid:"valid",text:"\u0418\u0434\u0435\u0430\u043b\u044c\u043d\u043e!"}})})):s((function(e){return Object(X.a)(Object(X.a)({},e),{},{num:{valid:"error",text:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u0444\u043e\u0440\u043c\u0430\u0442 \u0437\u0430\u0447\u0451\u0442\u043a\u0438"}})})):s((function(e){return Object(X.a)(Object(X.a)({},e),{},{num:{valid:"error",text:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u0447\u0451\u0442\u043a\u0438 \u0441\u043e\u0441\u0442\u043e\u0438\u0442 \u0438\u0437 6 \u0446\u0438\u0444\u0440"}})})))):s((function(e){return Object(X.a)(Object(X.a)({},e),{},{group:{valid:"",text:""}})})),u((function(e){return Object(X.a)(Object(X.a)({},e),{},Object($.a)({},a,n))}))};return r.a.createElement(v.a,{id:t},r.a.createElement(k.a,null,"\u041f\u043e\u043c\u043e\u0449\u043d\u0438\u043a \u0410\u043d\u0442\u043e\u0448\u043a\u0438"),r.a.createElement(A.d,null,f&&r.a.createElement(A.e,{header:f.header,mode:"error"},f.text),r.a.createElement(A.h,{top:"\u041d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b",name:"group",status:m.group.valid||null,bottom:m.group.text||null,onChange:E}),r.a.createElement(A.h,{top:"\u041d\u043e\u043c\u0435\u0440 \u0437\u0430\u0447\u0451\u0442\u043a\u0438",name:"num",status:m.num.valid||null,bottom:m.num.text||null,onChange:E}),r.a.createElement(A.a,{size:"l",onClick:function(){"valid"==m.group.valid&&"valid"==m.num.valid?a(g,l):("valid"!=m.group.valid&&s((function(e){return Object(X.a)(Object(X.a)({},e),{},{group:{valid:"error",text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043d\u043e\u043c\u0435\u0440 \u0433\u0440\u0443\u043f\u043f\u044b"}})})),"valid"!=m.num.valid&&s((function(e){return Object(X.a)(Object(X.a)({},e),{},{num:{valid:"error",text:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430 \u043d\u043e\u043c\u0435\u0440 \u0437\u0430\u0447\u0451\u0442\u043a\u0438"}})})))}},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")),r.a.createElement(A.f,null))}),te=function(){var e=Object(n.useState)("home"),t=Object(d.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(null),u=Object(d.a)(l,2),i=u[0],p=u[1],f=Object(n.useState)({group:"N"}),E=Object(d.a)(f,2),j=E[0],v=E[1],O=Object(n.useState)(r.a.createElement(g.a,{size:"large"})),k=Object(d.a)(O,2),x=k[0],C=k[1];Object(n.useEffect)((function(){o.a.subscribe((function(e){var t=e.detail,a=t.type,n=t.data;if("VKWebAppUpdateConfig"===a){var r=document.createAttribute("scheme");r.value=n.scheme?n.scheme:"client_light",document.body.attributes.setNamedItem(r)}}));function e(){return(e=Object(s.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.send("VKWebAppGetUserInfo").then((function(e){return p(e),e.id}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}(function(){return e.apply(this,arguments)})().then((function(e){C(r.a.createElement(g.a,{size:"large"})),h.a.get("https://tsu-helper-server.herokuapp.com/getUser",{params:{id:e}}).then((function(e){e.data.err?c("start"):e.data.user?v({group:e.data.user.group,num:e.data.user.num}):c("start")})),C(null)}))}),[]);var w=function(e){c(e.currentTarget.dataset.to)};return r.a.createElement(b.a,{activePanel:a,popout:x},r.a.createElement(ee,{id:"start",createUser:function(e,t){C(r.a.createElement(g.a,{size:"large"})),h.a.get("https://tsu-helper-server.herokuapp.com/newUser",{params:{id:i.id,group:t.group,num:t.num}}).then((function(t){t.data.err?(e({header:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0441\u0435\u0440\u0432\u0435\u0440\u0430",text:t.data.text}),C(null)):(v({group:t.data.user.group,num:t.data.user.num}),C(null),c("home"))}))}}),r.a.createElement(I,{id:"home",fetchedUser:i,go:w,appUser:j}),r.a.createElement(F,{id:"persik",go:w}),r.a.createElement(L,{id:"schedule",go:w}),r.a.createElement(Q,{id:"settings",go:w}),r.a.createElement(Z,{id:"progress",go:w,setPopout:C,appUser:j}))};o.a.send("VKWebAppInit"),l.a.render(r.a.createElement(te,null),document.getElementById("root"))}},[[211,1,2]]]);
//# sourceMappingURL=main.6ec6220f.chunk.js.map